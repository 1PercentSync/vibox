# ViBox MVP 需求文档

## 版本说明

这是 ViBox 系统的最小可行产品（MVP）版本，专注于核心功能实现。完整需求见 [REQUIREMENTS.md](./REQUIREMENTS.md)。

## MVP 核心功能

### 1. 容器管理
- **前端可以创建 Docker 容器**
  - 用户通过前端界面触发容器创建
  - 基于 Ubuntu 镜像创建容器
  - 容器保持运行状态

### 2. 自定义脚本执行
- **运行自定义的 `.sh` 脚本**
  - 支持在容器创建时执行用户自定义的初始化脚本
  - 脚本用于配置开发环境（如安装依赖、配置工具等）
  - 支持配置脚本执行顺序

### 3. Web 终端访问
- **实现容器内的 Web SSH**
  - 用户通过浏览器直接访问容器内的终端
  - 提供完整的 Shell 交互能力
  - 无需本地 SSH 客户端

### 4. HTTP 端口转发
- **暴露容器内的 HTTP 服务到前端**
  - 用户可以选择暴露容器内的特定端口
  - 通过前端提供的 URL 访问容器内服务
  - URL 格式：`baseurl/forward/{workspace-id}/{port}`
  - 支持动态开启/关闭端口映射

## 功能边界

### MVP 版本包含
✅ Docker 容器的创建和管理
✅ 自定义脚本执行
✅ Web 终端（WebSSH）
✅ HTTP 端口转发

### 暂不包含（后续版本）
❌ GitHub 集成（仓库拉取）
❌ AI Coding Agent 集成
❌ VS Code Server 集成
❌ 复杂的配置管理界面
❌ 用户认证和权限管理
❌ 持久化存储管理

## 用户流程

```
1. 用户打开前端界面
   ↓
2. 点击"创建工作空间"
   ↓
3. （可选）上传/选择自定义脚本
   ↓
4. 点击"创建"
   ↓
5. 系统创建 Docker 容器并执行脚本
   ↓
6. 用户可以：
   - 通过 Web 终端访问容器
   - 开启端口转发访问容器内服务
   - 销毁容器
```

## 技术需求

### 前端
- 简洁的 Web 界面
- 容器创建表单
- Web 终端集成
- 端口转发管理界面

### 后端
- Docker API 集成（容器管理）
- WebSocket 支持（Web 终端）
- HTTP 代理/反向代理（端口转发）
- 脚本执行管理

### 容器
- Ubuntu 基础镜像
- 必要的系统工具
- 支持自定义脚本执行

## 成功标准

MVP 版本达成以下目标即为成功：

1. ✅ 用户能通过前端创建一个运行中的 Docker 容器
2. ✅ 容器创建时能执行用户上传的 `.sh` 脚本
3. ✅ 用户能通过浏览器访问容器内的终端
4. ✅ 用户能暴露容器内的 HTTP 端口并通过 URL 访问
5. ✅ 用户能销毁创建的容器

## 下一步

1. 技术调研（参考 devcontainer 等类似方案）
2. 技术选型
3. 架构设计
4. 开发计划
